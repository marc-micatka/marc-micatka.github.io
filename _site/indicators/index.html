<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Stock Indicators for Trading - Refreshingly Dangerous</title>
<meta name="description" content="OMSCS 7647 Machine Learning for Trading - Summer 2020">


  <meta name="author" content="Marc Micatka">
  
  <meta property="article:author" content="Marc Micatka">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Refreshingly Dangerous">
<meta property="og:title" content="Stock Indicators for Trading">
<meta property="og:url" content="http://localhost:4000/indicators/">


  <meta property="og:description" content="OMSCS 7647 Machine Learning for Trading - Summer 2020">



  <meta property="og:image" content="http://localhost:4000/assets/images/indicators/indicators_thumbnail.png">





  <meta property="article:published_time" content="2020-07-24T00:00:00-07:00">



  <meta property="article:modified_time" content="2020-07-14T00:00:00-07:00">




<link rel="canonical" href="http://localhost:4000/indicators/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Refreshingly Dangerous Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
<link rel="manifest" href="/assets/images/site.webmanifest">
<link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/images/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Refreshingly Dangerous
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/travel/">Travel</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/photography/">Photography</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/">All Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/headshot.jpeg" alt="Marc Micatka" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Marc Micatka</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Occasional computer scientist, mechanical engineer, and traveler.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Seattle, WA</span>
        </li>
      

      

      
        <li>
          <a href="marcmicatka.com" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span>
          </a>
        </li>
      

      
        <li>
          <a href="mailto:marc.micatka@gmail.com">
            <meta itemprop="email" content="marc.micatka@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/marcmicatka" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/marc-micatka" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Stock Indicators for Trading">
    <meta itemprop="description" content="OMSCS 7647 Machine Learning for Trading - Summer 2020">
    <meta itemprop="datePublished" content="2020-07-24T00:00:00-07:00">
    <meta itemprop="dateModified" content="2020-07-14T00:00:00-07:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Stock Indicators for Trading
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>I took Machine Learning for Trading Summer 2020. Although I found it covered a lot of the same ground as <em>CS 6601 - Artificial Intelligence</em> but in less depth and detail, I appreciated learning about stock indicators and trading strategies as well as getting more familiar with database operations using pandas.</p>

<p>In addition to <em>a lot</em> of introductory numpy and pandas coursework, the class introduced basic stock trading terminology and techniques. The <em>machine learning</em> aspect was restricted to implementing a simple Q-Learning bot and a few version of decision trees. Our final project consisted of a manual strategy based on hard-coded indicator threshold values and a Strategy Learner bot that used random forests to generate trading decisions based on calculed indicators.</p>

<p>For this post, I’ll cover the stock indicators, in <a href="/autotrader/" target="_blank">Part II</a> we’ll use the indicators in a both a manual and machine learning-based trading strategy.</p>

<h3 id="indicators-for-trading">Indicators for Trading</h3>

<p>The basis for both the Manual Strategy and the Machine Learning strategy were stock indicators. All students calculated five indicators and used them to make trading decisions. The five indicators I chose were Bollinger Bands, Relative Strength Index, On-Balance Volume, Stochastic Oscillator, and Moving Average Convergence-Divergence. These were chosen for ease of calculation and because there are well-established trading strategies for all of these.</p>

<h4 id="bollinger-bands">Bollinger Bands</h4>
<p>Bollinger Bands are upper and lower limit lines to a price chart that help anticipate future price movements. The idea is to add upper and lower bounds that are 2 standard deviations above/below the simple moving average of a stock based on a 20 day window. Bollinger Bands can be calculated as shown below.</p>

\[Upper Band = MA(Price, n) + 2 * \sigma (Price, n)\]

\[Lower Band = MA(Price, n) - 2 * \sigma (Price, n)\]

<p>The bands can be used to generate a buy/sell signal whenever the price line crosses one of the bands. When the price crosses the upper band in a downward direction, that’s a sell signal. When the price crosses the lower band in an upward direction, that’s a buy signal. The idea is that the price will revert to the mean and by crossing the 2-sigma deviation line, it is not accurately reflecting the value of the stock. Below, we can see the buy/sell signal by calculating the Bollinger Band Percent.</p>

\[\%B = \frac{Price - Lower Band}{Upper Band - Lower Band}\]

<p>Where MA is the moving average, Price is the dataframe with daily adjusted price, n is the window size, and \(\sigma\) is the standard deviation of the prices. This can be calculated in python using pandas as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">bollinger_bands</span><span class="p">(</span><span class="n">prices_df</span><span class="p">):</span>
    <span class="s">"""
    Source: https://www.investopedia.com/terms/b/bollingerbands.asp
    """</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">20</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">std</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">20</span><span class="p">).</span><span class="n">std</span><span class="p">()</span>

    <span class="n">upper_band</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">std</span>
    <span class="n">lower_band</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">std</span>
    <span class="n">bbp</span> <span class="o">=</span> <span class="p">(</span><span class="n">prices_df</span> <span class="o">-</span> <span class="n">lower_band</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">upper_band</span> <span class="o">-</span> <span class="n">lower_band</span><span class="p">)</span>
    <span class="n">bb</span> <span class="o">=</span> <span class="p">(</span><span class="n">prices_df</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">std</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">prices_df</span><span class="p">,</span> <span class="n">upper_band</span><span class="p">,</span> <span class="n">lower_band</span><span class="p">,</span> <span class="n">bbp</span><span class="p">,</span> <span class="n">bb</span>
</code></pre></div></div>
<p>For the manual strategy, the <em>bbp</em> column was further processed - values above 1.0 were treated as a sell signal (-1) and values below 0 were treated as a buy signal (+1).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prices_df</span><span class="p">[</span><span class="s">'BB-Signal'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">prices_df</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bbp</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'BB-Signal'</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
<span class="n">prices_df</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bbp</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s">'BB-Signal'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</code></pre></div></div>

<p>Bollinger Bands are plotted below.</p>
<figure class="half">
    <a href="/assets/images/indicators/bollinger_bands.png"><img src="/assets/images/indicators/bollinger_bands.png" /></a>
    <a href="/assets/images/indicators/bollinger_bands2.png"><img src="/assets/images/indicators/bollinger_bands2.png" /></a>
    <figcaption>Bollinger Bands shown for JPM with both bands and normalized signals shown.</figcaption>
</figure>

<h4 id="relative-strength-index">Relative Strength Index</h4>
<p>RSI is a momentum indicator that varies between 0 and 100 that helps analysts identify overbought and
oversold trends. RSI is calculated as shown below.</p>

\[RSI = 100 - \frac{100}{1 + \frac{Average Gain}{Average Loss}}\]

<p>The average gain and loss are found using a rolling window of 14 days and looking at the days when
the stock lost value (average losses) or gained value (average gains).</p>

<p>RSI can be used to generate buy/sell signals using conventional thresholds of 70 signaling overbought
(thus a sell signal) and 30 signaling oversold (a buy signal). RSI can also be used to confirm a general
trend in a stock’s movement.</p>

<p>In python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rsi</span><span class="p">(</span><span class="n">prices_df</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">14</span><span class="p">):</span>
    <span class="s">"""
    Source: https://school.stockcharts.com/doku.php?id=technical_indicators:relative_strength_index_rsi
    """</span>
    <span class="n">difference</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">diff</span><span class="p">()</span>

    <span class="n">down_prices</span> <span class="o">=</span> <span class="n">difference</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">up_prices</span> <span class="o">=</span> <span class="n">difference</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">down_prices</span><span class="p">[</span><span class="n">down_prices</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="n">up_prices</span><span class="p">[</span><span class="n">up_prices</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">gain</span> <span class="o">=</span> <span class="n">up_prices</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">n</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">loss</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nb">abs</span><span class="p">(</span><span class="n">down_prices</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">n</span><span class="p">).</span><span class="n">mean</span><span class="p">())</span>
    <span class="n">RSI</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="mi">100</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">gain</span><span class="o">/</span><span class="n">loss</span><span class="p">))</span>

    <span class="n">rsi_signal</span> <span class="o">=</span> <span class="n">RSI</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">rsi_signal</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">rsi_signal</span><span class="p">[</span><span class="n">RSI</span> <span class="o">&gt;</span> <span class="mi">70</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">rsi_signal</span><span class="p">[</span><span class="n">RSI</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
    <span class="k">return</span> <span class="n">RSI</span><span class="p">,</span> <span class="n">rsi_signal</span>
</code></pre></div></div>

<h4 id="on-balance-volume">On-Balance Volume</h4>

<p>On-Balance Volume (OBV) is another indicator to assess the momentum of a stock using the volume of
the stock. The idea is that volume indicates the sentiment of the market - when there is strong upward
price movement there is also increased trading volume, resulting in a higher OBV. You can use the
slope of the OBV as a leading indicator of future price movements. It also indicates a positive market
trend because on days with a lot of price movement, there is a lot of volume movement.</p>

<p>Because OBV is a leading indicator, it can be used to predict price moves by its positive/negative
slope. When the slope is positive, that’s a buy signal. When the slope is negative, that is a sell signal.
OBV is not commonly used as a pricing indicator alone but is used to verify signals from other
indicators. In addition, a divergence between price movement and OBV movement can trigger a
buy/sell signal. Theoretically, OBV reacts before price (as a leading indicator). Therefore, if the OBV
slope is negative while the price slope is positive, that is a divergence and indicates a sell signal.
Similarly, if the OBV slope is positive while the price slope is negative, that’s a divergence in the other
direction and indicates a buy signal.</p>

<p>On-balance volume is calculated as follows:</p>

\[OBV = OBV_{prev} + \left\{ \begin{matrix}
            volume  &amp; \mathrm{if}\ close &gt; close_{prev} \\
            0       &amp; \mathrm{if}\ close = close_{prev} \\
            -volume &amp; \mathrm{if}\ close &lt; close_{prev}
            \end{matrix} \right.\]

<p>In python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">on_balance_volume</span><span class="p">(</span><span class="n">prices_df</span><span class="p">,</span> <span class="n">volume</span><span class="p">):</span>
    <span class="s">"""
    Source: https://www.investopedia.com/terms/o/onbalancevolume.asp
    """</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">prices_df</span> <span class="o">&gt;</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">down</span> <span class="o">=</span> <span class="n">prices_df</span> <span class="o">&lt;</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">zero</span> <span class="o">=</span> <span class="n">prices_df</span> <span class="o">==</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">obv</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">obv</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">nan</span>
    <span class="k">if</span> <span class="n">up</span><span class="p">.</span><span class="nb">sum</span><span class="p">():</span>
        <span class="n">obv</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">up</span><span class="p">]</span> <span class="o">=</span> <span class="n">volume</span>
    <span class="k">if</span> <span class="n">down</span><span class="p">.</span><span class="nb">sum</span><span class="p">():</span>
        <span class="n">obv</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">down</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">volume</span>
    <span class="k">if</span> <span class="n">zero</span><span class="p">.</span><span class="nb">sum</span><span class="p">():</span>
        <span class="n">obv</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">zero</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">obv</span><span class="p">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">price_signal</span> <span class="o">=</span> <span class="n">standardize</span><span class="p">(</span><span class="n">prices_df</span><span class="p">.</span><span class="n">diff</span><span class="p">().</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">).</span><span class="n">mean</span><span class="p">())</span>
    <span class="n">obv_signal</span> <span class="o">=</span> <span class="n">standardize</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">diff</span><span class="p">().</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">).</span><span class="n">mean</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">obv</span><span class="p">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">obv_signal</span> <span class="o">-</span> <span class="n">price_signal</span>
</code></pre></div></div>

<p>OBV is plotted below.</p>
<figure class="align-center">
    <a href="/assets/images/indicators/on_balance_volume.png"><img src="/assets/images/indicators/on_balance_volume.png" /></a>
    <figcaption>OBV shown for JPM with normalized signals shown.</figcaption>
</figure>

<h4 id="stochastic-oscillator">Stochastic Oscillator</h4>
<p>The stochastic oscillator indicator assesses momentum and compares the closing price of a stock on
any given day with the maximum and minimum closing prices of the same stock over a range. This
indicator can be used to indicate whether a stock is overbought or oversold, helping to trigger a buy/sell
signal.</p>

<p>Using the oscillator, a buy/sell signal can be generated when the stochastic oscillator line crosses a
moving average line, indicating a reversal in price could be on its way. High values of the SO indicate
that the stock is overbought and low values indicate the stock is oversold. Common threshold values
for these conditions are 80 for overbought (indicating a good time to sell) and 20 for oversold
(indicating a good time to buy).</p>

<p>The stochastic oscillator is calculated as shown below:</p>

\[SO = \frac{100 * Price(t) - min(Price, n)}{max(Price, n) - min(Price, n)}\]

<p>In python:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">stochastic_oscillator</span><span class="p">(</span><span class="n">prices_df</span><span class="p">,</span> <span class="n">high_df</span><span class="p">,</span> <span class="n">low_df</span><span class="p">):</span>
    <span class="s">"""
    Souce: https://www.investopedia.com/terms/s/stochasticoscillator.asp
    """</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">n_fast</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="nb">max</span> <span class="o">=</span> <span class="n">high_df</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">n</span><span class="p">).</span><span class="nb">max</span><span class="p">()</span>
    <span class="c1"># max_fast = high_df.rolling(window=n_fast).max()
</span>
    <span class="nb">min</span> <span class="o">=</span> <span class="n">low_df</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">n</span><span class="p">).</span><span class="nb">min</span><span class="p">()</span>
    <span class="c1"># min_fast = low_df.rolling(window=n_fast).min()
</span>
    <span class="n">so</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">prices_df</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span>
    <span class="n">so_average</span> <span class="o">=</span> <span class="n">so</span><span class="p">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">n_fast</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">so</span><span class="p">,</span> <span class="n">so_average</span>
</code></pre></div></div>
<p>The Stochastic Oscillator is plotted below with buy/sell signals.</p>
<figure class="align-center">
    <a href="/assets/images/indicators/stochastic_oscillator.png"><img src="/assets/images/indicators/stochastic_oscillator.png" /></a>
    <figcaption>SO shown for JPM with a normalized signal shown along with the buy/sell signal lines.</figcaption>
</figure>

<h4 id="moving-average-convergence-divergence">Moving Average Convergence-Divergence</h4>
<p>The Moving Average Convergence-Divergence indicators (MACD) is a momentum indicator to assess
the relationship between two different moving averages. MACD is calculated using three different
moving averages – the 12 day exponential moving average (EMA), 26 day EMA, and the 9 day EMA.
Because the 12 day EMA responds more quickly to price changes than the 26 day EMA, the MACD
indicates changes in trends.</p>

\[MACD = EMA(Price, n_{fast}) - EMA(Price, n_{slow})\]

\[MACD_{signal} = EMA(Price, n_{signal})\]

<p>The buy/sell signal can be found when the MACD crosses the signal line. If the MACD falls below the
signal line, it may indicate a sell signal as the market is possibly entering a downturn. If the MACD
rises above the signal line, it can be a buy signal indicating a bull market. The histogram plots the
difference between the MACD and Signal lines. When the histogram crosses from positive to negative,
that is a sell signal and when it crosses from negative to positive, that is a buy signal.</p>

<p>In python!</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">macd</span><span class="p">(</span><span class="n">prices_df</span><span class="p">):</span>
    <span class="s">"""
    Source: https://www.investopedia.com/terms/m/macd.asp
    """</span>
    <span class="n">signal_period</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">slow_period</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">fast_period</span> <span class="o">=</span> <span class="mi">26</span>

    <span class="n">ewa_slow</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="n">slow_period</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">ewa_fast</span> <span class="o">=</span> <span class="n">prices_df</span><span class="p">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="n">fast_period</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">MACD</span> <span class="o">=</span> <span class="n">ewa_fast</span> <span class="o">-</span> <span class="n">ewa_slow</span>

    <span class="n">macd_signal</span> <span class="o">=</span> <span class="n">MACD</span><span class="p">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="n">signal_period</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">macd_diff</span> <span class="o">=</span> <span class="n">MACD</span> <span class="o">-</span> <span class="n">macd_signal</span>

    <span class="k">return</span> <span class="n">MACD</span><span class="p">,</span> <span class="n">macd_signal</span><span class="p">,</span> <span class="n">macd_diff</span>
</code></pre></div></div>
<p>MACD is plotted below with buy/sell signal lines.</p>
<figure class="align-center">
    <a href="/assets/images/indicators/macd.png"><img src="/assets/images/indicators/macd.png" /></a>
    <figcaption>MACD shown for JPM with buy/sell signal lines and a positive/negative histogram indicator.</figcaption>
</figure>

<p>In <a href="/autotrader/" target="_blank">Part II</a> we’ll use some of these indicators to generate trading signals for both a manual and strategy using decision trees.</p>

<h3 id="project-report">Project Report</h3>
<p>See the link below for my class indicator report.</p>

<p><a href="/downloads/indicators/report.pdf" target="_blank">Report</a></p>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#ai" class="page__taxonomy-item" rel="tag">AI</a><span class="sep">, </span>
    
      <a href="/tags/#omscs" class="page__taxonomy-item" rel="tag">OMSCS</a><span class="sep">, </span>
    
      <a href="/tags/#projects" class="page__taxonomy-item" rel="tag">Projects</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-07-14">July 14, 2020</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/autotrader/" class="pagination--pager" title="Trading with Machine Learning
">Previous</a>
    
    
      <a href="/seamcarving/" class="pagination--pager" title="Content Aware Image Resizing
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://drive.google.com/uc?id=1p3EsdC_fDbeRi10jBEZr24UFZcrDkWDD" alt="">
      </div>
    
    
    <h2 class="archive__item-title" itemprop="headline">
    
      
        <a href="/ptarmigan/" rel="permalink">North Cascades - Ptarmigan Loop
</a>
      
        


    </h2>


      <p class="archive__item-excerpt" itemprop="description">High peaks and bushwacking.
</p>
      

    

    
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/rainier/thumbnail.jpg" alt="">
      </div>
    
    
    <h2 class="archive__item-title" itemprop="headline">
    
      
        <a href="/rainier/" rel="permalink">Skiing Camp Muir
</a>
      
        


    </h2>


      <p class="archive__item-excerpt" itemprop="description">Ross shreds, Marc…manages.
</p>
      

    

    
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2020/thumbnail.jpg" alt="">
      </div>
    
    
    <h2 class="archive__item-title" itemprop="headline">
    
      
        <a href="/2020_travel/" rel="permalink">2020 - A Retrospective
</a>
      
        


    </h2>


      <p class="archive__item-excerpt" itemprop="description">Life and adventures during a global pandemic
</p>
      

    

    
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/stabilization/thumbnail.png" alt="">
      </div>
    
    
    <h2 class="archive__item-title" itemprop="headline">
    
      
        <a href="/stabilization/" rel="permalink">Auto-Directed L1 Video Stabilization
</a>
      
        


    </h2>


      <p class="archive__item-excerpt" itemprop="description">OMSCS 6475 Computational Photography - Fall 2020
</p>
      

    

    
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://linkedin.com/marcmicatka" rel="nofollow noopener noreferrer"><i class="fab fa-linkedin-in" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/marc-micatka" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="marc.micatka@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
    

  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Refreshingly Dangerous. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
