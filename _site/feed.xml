<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-08-23T16:43:55-07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Refreshingly Dangerous</title><subtitle>Projects. Travel.</subtitle><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><entry><title type="html">North Cascades - Ptarmigan Loop</title><link href="http://localhost:4000/ptarmigan/" rel="alternate" type="text/html" title="North Cascades - Ptarmigan Loop" /><published>2022-08-13T00:00:00-07:00</published><updated>2022-08-22T00:00:00-07:00</updated><id>http://localhost:4000/ptarmigan</id><content type="html" xml:base="http://localhost:4000/ptarmigan/">&lt;p&gt;Many moons ago, I read this article about the thrilling and beautiful Ptarmigan Traverse - a high route through the rugged terrain of the North Cascades, a mix of glacier and rock and trail travel. I was sold and began scheming to do it one day.
Ross is a pretty easy sell - I think he had also heard of the route - and so we began planning in earnest.&lt;/p&gt;

&lt;p&gt;The route is deceptively short, around 30 miles, traditionally split over 5 days. This, as we will learn, is for good reason. 
The terrain is never flat for long, route finding can be complicated and is very serious business, the exposure is real as the trail crosses snowfields, cliffs, and glaciers with thousands of feet of air below you.&lt;/p&gt;

&lt;p&gt;Typically, the route is done as a North to South traverse, with a long car shuttle serving as the bookends to the trip. 
We didn’t have a second car free to do the shuttle and, frankly, even if we had I didn’t want to drive that many hours before AND after the trip. 
In a bit of blatant foreshadowing, let’s say that it became very clear why the exit is done with two cars…
Anyway, we planned a loop, exiting out the rarely used South Fork Cascade Trail.&lt;/p&gt;

&lt;p&gt;Ross arrived on Friday morning and we left that afternoon, intending to sleep near the trailhead after picking up some last minute gear.&lt;/p&gt;

&lt;p&gt;Here’s our route:&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;&lt;iframe style=&quot;align-center&quot; width=&quot;100%&quot; height=&quot;500&quot; src=&quot;https://caltopo.com/m/UT5FH&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;

&lt;p&gt;Full resolution pictures are hosted 
&lt;a href=&quot;https://flic.kr/s/aHBqjA49JT&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;day-1---cascade-pass-trailhead-to-kool-aid-lake&quot;&gt;Day 1 - Cascade Pass Trailhead to Kool-Aid Lake&lt;/h3&gt;
&lt;p&gt;Our morning starts in heavy fog and the sound of other hikers busily covering themselves in deet and packing bags. 
We were initially a concerned with the sheer volume of folks in the lot! But it turned out that they were almost all day hiking Boston Basin or another trail in the North Cascades and when we turned off a tiny, unmarked dirt trail onto the traverse the crowds disappeared.
From here on out we would see seven people total the next 5 days.&lt;/p&gt;

&lt;p&gt;We made quick time through the fog and down the trail to Kool-Aid.&lt;/p&gt;
&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306585814_a0feec4e99.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Ross pushing through the fog.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;We set up the tent and Ross promptly crawled inside to take a nap! Ross had had a busy few days! After he woke up, we scrambled up nearby Magic Mountain.&lt;/p&gt;
&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306070916_c409856e3a.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Ross trying to figure out how or why anyone would try and climb the massive and intimidating Johannesburg Mountain.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;In the afternoon we scrambled up nearby Magic Mountain for some classic Cascade views and climbing.&lt;/p&gt;
&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306599960_3115744d34.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Happy to finally be on some semi-solid rock on the summit ridge.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;That evening, we were visited by a BEAUTIFUL mountain goat. Honestly, folks, this goat was…buff? The coat was incredible. I don’t really get it. Also it seemed to be posing? 
Anyway, we seemed to develop a pretty good rapport.&lt;/p&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306584769_706c87d155.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Try to not get distracted by those delts.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The evening turned out to be truly spectacular. Although Mount Formidable, true to its name, stayed shrouded in clouds all night.&lt;/p&gt;

&lt;h3 id=&quot;day-2---kool-aid-lake-to-yang-yang-lake&quot;&gt;Day 2 - Kool-Aid Lake to Yang Yang Lake&lt;/h3&gt;
&lt;p&gt;The next morning we woke up to blue skies and packed up with glee - excited to dive deeper into the wilderness. 
The trail crosses a loose scree field and then up a narrow and improbable track through a cliff band called the “Red Ledges”.&lt;/p&gt;
&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306585229_e4627769d3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;We were aiming for that skinny red strip through the cliff.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We roped up for the glacier under Formidable before crossing the pass into a massive basin above Flat Creek. 
The basin is a massive horseshoe and you can see the camp you’re aiming for nearly all day.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306599005_85348ab0a2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306531343_74c4bea7a1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;No slipping allowed.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52305347152_226b48969b.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306599745_7ed348e074.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;day-3---yang-yang-lake-to-white-rock-lakes&quot;&gt;Day 3 - Yang Yang Lake to White Rock Lakes&lt;/h3&gt;
&lt;p&gt;This stretch is unreal and has got to be one of the most scenic 5 miles I’ve ever done. 
We left Yang Yang Lakes headed back up to the ridge, immediately gaining about 1000ft of elevation directly out of camp.&lt;/p&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306584839_d370eecba0.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Ross calls this one &quot;Lost Millenial&quot;.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once you gain the ridge, you get to drop all that elevation again! Down the snow slopes below Le Conte Mountain for a long snow crossing.
To exit, you need to climb straight up to a pass between Spire and Old Guard, staying well clear of the gaping crevasses on either side.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306585784_dc0b0d38de.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306531713_e24a5d9615.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Doing my best to look excited for a 1000 vertical feet on steep, soft snow.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;From the saddle, it’s a pretty comfortable snow crossing to a ridge above South Cascade Glacier and from there, 
you just need to navigate mere 600 vertical feet of snow and rocks to get to a picturesque camp at White Rock Lakes.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306584899_87ce0b5d2d.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52305346427_0f00330d16.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Beautiful basin across the glacier.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306599490_13924de97d.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Dropping into White Rock Lakes.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306531403_e0e9ba2472.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Near the top of German Helmet Butte.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306070626_edea83cdc1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Ridges on Dome Peak from German Helmet Butte.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;day-4---white-rock-lakes-to-some-random-spot-along-drop-creek&quot;&gt;Day 4 - White Rock Lakes to Some Random Spot along Drop Creek&lt;/h3&gt;
&lt;p&gt;Our original plan had been to double back and exit out the South Cascade River trail coming down the South Cascade Glacier.
This is quite notorious has the 5 people we met were all a bit taken aback. The trail has been unmaintained for years and is brushy and overgrown, horrendous to navigate.
On day 3, we scrambled near the summit of German Helmet Butte and there we found a wonderful and kind North Cascades guru, Kevin, who had been in the area for 10+ days and seemed to know the ins and outs of all the ridges and drainages.
He suggested that instead of the river trail, we drop into High Log Creek to Drop Creek, hitting the river trail at an angle and cutting off many miles of bushwacking. 
Insanely, Ross and I both quickly agreed to this plan. Kevin sounded as confident as Ross and I were unconfident, describing only one short section of “steep trees”.
This, naturally, would be an understatement.&lt;/p&gt;

&lt;p&gt;In the morning, we left camp headed north, back over the pass.&lt;/p&gt;

&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306584929_84bba2dcc3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Crossing the outlet of White Rock Lakes.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;At the saddle with Le Conte, we crossed the glacier and summited Old Guard Peak.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306531108_27cbae3317.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52305346592_845f11e8b3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Summit of Old Guard Peak.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;We made quick time back over Le Conte and quickly dropped into the right drainage.
The initial 1000 feet down were easy, no trees, boulder hopping across trickling streams fed from snowmelt.&lt;/p&gt;
&lt;figure&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306070296_ab17ba551c.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Through the mountain meadows, heading down.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once we hit trees, it quickly became impossible to plan more than a few feet in advance. We hit a cliffband overlooking a waterfall and circled around where we hit…steep trees.
These trees were improbably clinging to a 45 degree slope, trucks curved sharply towards the sun. After we both slipped down the hill and caught ourselves on trees, we decided that we needed to use the rope to safely lower.&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306070356_de9ffe101d.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306585204_e879cd7810.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Starting down.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once we navigated the trees, we had some heinous bushwacking along the river to get to more open forests. Finally, around 7:30pm, we found a flat spot along the creek and setup camp, exhausted.&lt;/p&gt;

&lt;h3 id=&quot;day-5---out&quot;&gt;Day 5 - Out&lt;strong&gt;!&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;In the morning, we continued our way out along the creek, navigating nasty, overgrown bushes often complete with nettles and thorns.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52305346292_15fcdc8847.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a&gt;&lt;img src=&quot;https://farm66.staticflickr.com/65535/52306599605_68759fef10.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Like this, for 10 miles.&lt;/figcaption&gt;
&lt;/figure&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Trip Reports" /><category term="Travel" /><category term="Photos" /><category term="Backpacking" /><summary type="html">High peaks and bushwacking.</summary></entry><entry><title type="html">Skiing Camp Muir</title><link href="http://localhost:4000/rainier/" rel="alternate" type="text/html" title="Skiing Camp Muir" /><published>2021-05-27T00:00:00-07:00</published><updated>2021-05-27T00:00:00-07:00</updated><id>http://localhost:4000/rainier</id><content type="html" xml:base="http://localhost:4000/rainier/">&lt;figure class=&quot;align-right&quot; style=&quot;width:250px&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/rainier/junkshow.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Don't call it a junkshow. Actually, do. Because it is.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Ross was coming into town from SLC for our guided trip up Shuksan. But first! His trip to ski Shasta in California was cancelled because the snow was so crummy on the mountain. Instead, he got here a few days early and I offered to take him halfway up Mt Rainier to Camp Muir if he would provide the skis to get us back down.&lt;/p&gt;

&lt;p&gt;So we found ourselves in the parking lot of Paradise at 6:30am wondering if the toliets were open and if it would be a huge pain to have to carry the skis up 4,800 vertical feet. The answers are…yes and yes.&lt;/p&gt;

&lt;p&gt;Ross had one set of touring skis and one set of downhill skis so we just strapped both pairs to our packs and huffed the whole kit up the mountain. There’s a reason people don’t do this.&lt;/p&gt;

&lt;p&gt;The day was perfect. Warm and sunny and totally blue skies. This is Rainier at its best and I was stoked that Ross was seeing the mountain in a good light for his first visit. As a Rainier fanboy, I am also anxious for good weather when I take people to visit.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/rainier/ross.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/rainier/walkup.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;After getting roasted by the sun in a complete whiteout last weekend, I wasn’t taking any chances on a sunny day on a snowfield. We started the long walk up and really crushed the first 3,000 feet. We took a bathroom and food break and then both bonked hard for the last 1,000+ feet.&lt;/p&gt;

&lt;p&gt;We eventually made it to Camp Muir and took a break. The snow was getting thick as the day started to get hot. We strapped on our skis and I prepared for my first skiing trip out in…a year? It was immediately clear that after almost five thousand vertical feet, my skiing skills were going to be dicey. Luckily the first  long descent was on basically a bunny hill. We dropped 2,000ft in 12 minutes.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/rainier/muir.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/rainier/skiing.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/OF4WwusA2tA&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;After we left the snowfield, a funny thing happened. First - Ross took off down the choppy snow, over the rolling drop-offs and I took off after him. Then - a wild glissade chute appeared. Ross took it in stride, I took it…poorly. My ski tips caught in the chute and I ate it, right in front of everyone still hiking up. I slid quite aways, coming to a stop awkwardly and tried my damndest to get back on my skis with my dignity intact. I totally failed. Instead, I hiked down the hill away from the crowd and proceeded to get stuck on a very steep drop-off. Instead of struggling longer, I just strapped my skis back on my pack and hiked the last 1,000ft out to the car. An awkward end to a glorious day but hey - I’m a climber not a skiier!&lt;/p&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Trip Reports" /><category term="Travel" /><category term="Photos" /><category term="Backpacking" /><summary type="html">Ross shreds, Marc...manages.</summary></entry><entry><title type="html">2020 - A Retrospective</title><link href="http://localhost:4000/2020_travel/" rel="alternate" type="text/html" title="2020 - A Retrospective" /><published>2021-04-08T00:00:00-07:00</published><updated>2021-04-08T00:00:00-07:00</updated><id>http://localhost:4000/2020_travel</id><content type="html" xml:base="http://localhost:4000/2020_travel/">&lt;p&gt;The worst year ever?&lt;/p&gt;

&lt;p&gt;The end of 2019 finds us in the outskirts of Los Angeles, in Pomona, California where Mary is working at Pomona Valley Hospital. The pandemic touches us early - the first death in Los Angeles County is at Mary’s hospital and when we arrive one morning to drop her off, the news vans are waiting outside. We’re still at the early stage, when a death makes national news.&lt;/p&gt;

&lt;p&gt;Pomona Valley is a wreck - Mary comes home having been on her feet running for 12 hours, skipping breaks, being assigned double the patient load from what she’s used to dealing with. We have also found ourselves sharing a house with a three generation Chinese family, the only AirBnB listing within a reasonable budget and commute. They’re plenty nice and we get along just fine, but the room is small, the kitchen is crowded, and we find a lot of reasons to try and escape the city.&lt;/p&gt;

&lt;p&gt;Luckily California is home to incredible natural beauty and we’re within a reasonable driving distance to a lot of amazing stuff.&lt;/p&gt;

&lt;h3 id=&quot;joshua-tree&quot;&gt;Joshua Tree&lt;/h3&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/jtree_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/jtree_2.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;We spend New Years at the National Park, climbing frozen rock amidst piles of (rare) snow. The desert is cold and clear and we get to boondock with professionals in a nearby dried lakebed.&lt;/p&gt;

&lt;h3 id=&quot;yosemite&quot;&gt;Yosemite&lt;/h3&gt;

&lt;p&gt;A few weeks later and we decide, almost on a whim, to drive to Yosemite. I was a few days from starting my school semester so this seemed like as good a time as any. We’d been scared of Yosemite for a while now. As self-avowed outdoors-people and climbers, it was our duty to know and love and be intimately familiar with Yosemite. And yet, a visit had never worked out. The longer and longer we went, the more intimidating it became to plan a trip around the crowds, the permits, the lottery based reservation system, the epic tales of traffic jams circling the valley.&lt;/p&gt;

&lt;p&gt;We decided a winter trip was the perfect solution to our Yosemite woes. The crowds would be minimal, the trails snowy and empty, and zones that normally required permits were walk-up during the winter. With that in mind, we bought two pairs of snowshoes and set out.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/yosemite_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/yosemite_2.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;Our first goal was a winter hike up Glacier Point Road. Normally a thoroughfare in the summer, the road is gated in the winter and groomed for snowshoes and skiers to reach the overlook. Even better - you can camp at the overlook! The road is long but easy walking and we enjoy the cool winter air and the towering trees. when we reach the end, we find a perfect place to set up a tent and watch the sunset over Half Dome.&lt;/p&gt;

&lt;h3 id=&quot;other-adventures&quot;&gt;Other Adventures&lt;/h3&gt;

&lt;p&gt;We find time to see Bon Iver in concert at the M3F festival in Phoenix, meet up with friends at Mammoth Mountain for skiing and Red Rocks in Nevada for climbing. The pending panic creeps along, at the periphery of our awareness.&lt;/p&gt;

&lt;!-- 
&lt;figure class = &quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/boniver_1.jpg&quot; alt=&quot;&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/boniver_2.jpg&quot; alt=&quot;&quot;&gt;
&lt;/figure&gt; --&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/mammoth.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/red_rocks.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;By the time Mary’s assignment is up, things are more serious. Originally, Mary had planned to spend a weekend in San Francisco with her mom and I was going to meet up with friends in Colorado to ski. Both of those plans were cancelled and instead, we picked up Mary’s mom and drove 30 hours non-stop back to Minnesota to shelter in-place.&lt;/p&gt;

&lt;h3 id=&quot;andwe-head-back-west&quot;&gt;And…We Head Back West!&lt;/h3&gt;

&lt;p&gt;In the waning days of the Pomona assignment, we tried to find a more relaxing follow-up destination. Our original goal had been to make it to Alaska, Mary even had her license. But that was looking less and less likely, as no assignments were opening up. At the last minute, Mary snagged a spot in South Lake Tahoe, a truly incredible (and lucky!) find and we took the opportunity right away. After our lockdown in Minnesota, we loaded the CRV down once again for a trek west. This time we were headed to the clear mountain air of Tahoe and we had rented an entire house in a quaint neighborhood where the roads dead-ended into a national forest.&lt;/p&gt;

&lt;p&gt;It was perfect.&lt;/p&gt;

&lt;p&gt;We had a huge backyard, walking distance to trails, biking distance to the lake. The shutdowns kept the town quiet and relatively free from tourists and Mary’s hospital was blissfully slow. We spent our days soaking in the summer sun, running along the lakeshore, hiking in the mountains behind our house. We could follow the restrictions on staying with five miles of your house to responsibly enjoy recreation and &lt;em&gt;still&lt;/em&gt; go climbing! What a place.&lt;/p&gt;

&lt;p&gt;There was beautiful landscapes to enjoy:&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_2.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Mary enjoying our backyard trail system in Tahoe and Picnic Rock just a few miles from our house.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_6.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_7.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;A frozen Lake Aloha and a sunlit Lake Tahoe&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;And wildlife galore.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_3.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;A chipmunk strikes a pose on our porch railing&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_4.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tahoe_5.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;One morning we were enjoying our coffee on the patio when we noticed some bears had taken up residence at our neighbors place!&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Although we tried desperately to get Mary’s assignment extended into the fall, the hospital was so slow to justify keeping her on. Frankly, it was a minor miracle she got the original assignment. As the three months came to a close, Mary found a job posting for a daytime position at her old hospital in Overlake in Seattle. She applied and almost immediately her old manager got in touch. The job was hers and we were gearing up for one last move.&lt;/p&gt;

&lt;h2 id=&quot;classic-roadtrip-incoming&quot;&gt;Classic Roadtrip Incoming…&lt;/h2&gt;
&lt;figure class=&quot;align-right&quot; style=&quot;width:250px&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/crv_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Loaded.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We loaded up poor Billie with our world possessions and started back to Minnesota. The plan was to relax in Minnesota for a few weeks, pack up the rest of our stuff and move, for real, to Seattle. On the way east, we stopped in Wyoming to visit Grand Tetons National Park.&lt;/p&gt;

&lt;p&gt;There was a free campsite listed near the park. We took an…unfortunate route to get there. Up and over an entire mountain looking for an open campsite. At one point, we realized we were on an ATV trail with a fully loaded CRV - bikes hanging off the back and top, chair strapped to our roof. We eventually found a spot after coming off the mountain, about a mile from where we started if we had just stayed on the main road. But such is life when you’re searching for the freebies.&lt;/p&gt;

&lt;p&gt;Our campsite was spectacular and the wildflowers were in full bloom.&lt;/p&gt;
&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tetons_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Wildflowers near our campsite.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tetons_2.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/tetons_3.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Hiking the Paintbrush Divide.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;We made it back to MN in one piece where we regrouped, relaxed by the pool, and headed out on our own individual adventures - Mary with her sister and niece to the Boundary Waters and Ross and I to the Wind River Ranger in Wyoming (&lt;a href=&quot;/winds3/&quot; target=&quot;_blank&quot;&gt;trip report here&lt;/a&gt;).&lt;/p&gt;

&lt;h2 id=&quot;next-stop---seattle&quot;&gt;Next Stop - Seattle!&lt;/h2&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/seattle_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/2020/seattle_2.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Trip Reports" /><category term="Travel" /><category term="Photos" /><summary type="html">Life and adventures during a global pandemic</summary></entry><entry><title type="html">Auto-Directed L1 Video Stabilization</title><link href="http://localhost:4000/stabilization/" rel="alternate" type="text/html" title="Auto-Directed L1 Video Stabilization" /><published>2021-03-24T00:00:00-07:00</published><updated>2021-03-21T00:00:00-07:00</updated><id>http://localhost:4000/stabilization</id><content type="html" xml:base="http://localhost:4000/stabilization/">&lt;p&gt;The final for &lt;em&gt;CS 6475&lt;/em&gt; focused on implementing a paper and trying to achieve similar results to the authors’ using our own images. We had a choice of five or six papers and I chose to try to implement &lt;a href=&quot;http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/37041.pdf&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Auto-Directed Video Stabilization with Robust L1 Optimal Camera Paths&lt;/em&gt;&lt;/a&gt;. This paper is really awesome - there’s a ton of math and image processing techniques that get covered, and the results are actually really amazing. In fact, a modified version of this technique is still used in Google products.&lt;/p&gt;

&lt;p&gt;Video stabilization is the process of…stabilizing a shaky video! There are two main way to achieve stabilization - physical or digital. &lt;em&gt;Physical&lt;/em&gt; stabilization requires the use of gimbals, tripods, or other methods to eliminate the shake &lt;em&gt;as it happens&lt;/em&gt;. Digital stabilization takes place sometime after the frame has been captured and is a post-processing step. We will be executing digitial video stabilization.&lt;/p&gt;

&lt;p&gt;Let’s start with some results. We’ll be using an &lt;a href=&quot;https://www.youtube.com/watch?v=2S_U1pnLE-M&amp;amp;t=0s&quot; target=&quot;_blank&quot;&gt;example video&lt;/a&gt; (not shot by me) that the paper uses. My results are shown side-by-side with the input video.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/yvPAclwMt7Q&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;video-stabilization-overview&quot;&gt;Video Stabilization Overview&lt;/h3&gt;
&lt;p&gt;Stabilization requires a few steps.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Find the motion change (change in x, y, angle, and scale) between subsequent frames​&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Smooth the resulting motion model to remove jitters (post-processed)​&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;The motion model can be found using a feature matching algorithm to estimate an affine transformation matrix.&lt;/li&gt;
      &lt;li&gt;Use L1 trend fitting as an algorithmic interpretation of how a camera would move if it were moved professionally/optimally.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Transform original motion path to smooth motion path​&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Apply transformation to video&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;l1-trend-fitting&quot;&gt;L1 Trend Fitting&lt;/h3&gt;
&lt;p&gt;L1 trend fitting seeks to approximate an input with a piecewise fit of different motion models. In our case, our input is the shake motion and the motion models are one of three difference motions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Stationary
    &lt;ul&gt;
      &lt;li&gt;Analogous to using a tripod&lt;/li&gt;
      &lt;li&gt;Constant Position, No Velocity&lt;/li&gt;
      &lt;li&gt;dP/dT = 0&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Constant Motion
    &lt;ul&gt;
      &lt;li&gt;Analogous to using a dolly/panning&lt;/li&gt;
      &lt;li&gt;Constant Velocity, No Acceleration&lt;/li&gt;
      &lt;li&gt;dP^2/dT = 0&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Smooth Transitions
    &lt;ul&gt;
      &lt;li&gt;Analogous to changing between types 1 and 2 smoothly&lt;/li&gt;
      &lt;li&gt;Constant Acceleration, No Jerk&lt;/li&gt;
      &lt;li&gt;dP^3/dT = 0&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;third&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/0_position.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/0_velocity.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/0_acceleration.png&quot; alt=&quot;&quot; /&gt;
&lt;figcaption&gt;An example of the motion models as seen in the optimal trend path.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;computational-pipeline&quot;&gt;Computational Pipeline&lt;/h3&gt;
&lt;p&gt;The implementation will follow this basic computational pipeline:&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/pipeline.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;figure style=&quot;width: 350px&quot; class=&quot;align-right&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/load_video.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;video-input&quot;&gt;Video Input&lt;/h3&gt;
&lt;p&gt;This one is pretty straightforward. We are loading all frames of the video into a buffer. This isn’t &lt;em&gt;strictly&lt;/em&gt; necessary, and is actually a memory-bottleneck down the road for longer or more high-quality videos. But for prototyping a working stabilization system, this works well.&lt;/p&gt;

&lt;h3 id=&quot;calculating-motion&quot;&gt;Calculating Motion&lt;/h3&gt;
&lt;p&gt;To find the motion between subsequent frames, we have a few methods to choose from. The paper uses Lukas-Kanade optical flow. I experimented with a keypoint-based detector like ORB or SIFT and the results were very similiar.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Find matching points between frame i-1 (img1 in the code) and frame i (img2).&lt;/li&gt;
  &lt;li&gt;Use these points to estimate the &lt;em&gt;affine transformation&lt;/em&gt; between the two images.
    &lt;ul&gt;
      &lt;li&gt;This will be a 3x3 homography matrix&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Throw out the last line of the homography as we’re only interested in the &lt;em&gt;affine&lt;/em&gt; components&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Here’s how we can do that in Python with OpenCV:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lk_tracking&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;goodFeaturesToTrack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxCorners&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qualityLevel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minDistance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blockSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calcOpticalFlowPyrLK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;image_1_points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;image_2_points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;estimateAffinePartial2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_1_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_2_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can plot the keypoints we’ve found to see how the same points are found in subsequent frames.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/keypoints.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;Once we’ve found the points, we estimate the transform.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find_transforms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_cnt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;It1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;It&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find_homography&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;It&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;It1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can see how we’ve manually replaced the last row of the homography matrix &lt;em&gt;h&lt;/em&gt; with [0, 0, 1]. This is because we are only considering affine transforms - translation, rotation, and scale. We are &lt;strong&gt;not&lt;/strong&gt; considering shear or perspective skews. This is an assumption that helps us solve the resulting optimal paths problem in a reasonable amount of time (as we’ll see below). It is also a pretty &lt;em&gt;safe&lt;/em&gt; assumption because the changes between frames of a video are reasonably small.
The other thing we’ve done is stored all of the &lt;em&gt;cummulative&lt;/em&gt; matrices in &lt;em&gt;ct&lt;/em&gt;. What we’re left with is the individual homography transforms from image i-1 to i in &lt;em&gt;ft&lt;/em&gt; and the &lt;em&gt;total&lt;/em&gt; motion from image 0 to image i in &lt;em&gt;ct&lt;/em&gt;. This will be very important for our final smoothing.&lt;/p&gt;

&lt;h3 id=&quot;smooth-motion&quot;&gt;Smooth Motion&lt;/h3&gt;
&lt;p&gt;Here’s where the magic happens! We’ve found our homography matrix: \(h = \begin{bmatrix}
a &amp;amp; b &amp;amp; dx\\
c &amp;amp; d &amp;amp; dy\\
0 &amp;amp; 0 &amp;amp;1
\end{bmatrix}\)&lt;/p&gt;

&lt;p&gt;We can use some matrix math and CV transforms to decompose this matrix into individual translation, rotation, and scale components:&lt;/p&gt;

\[Translation: t_x = dy, t_y = dy\]

\[Rotation: \theta = tan^{-1}\frac{c}{a}\]

\[Scale: s = \sqrt{a^2 + c^2}\]

&lt;p&gt;We want to smooth these values using our L1 trend fitting process.
To do this, we use a linear programming package and find our motion derivatives. We are seeking to minimize the objective function \(O(P) = w_1 |D(P)| + w_2|D^2(P)| + w_3|D^3(P)|\) where \(D(P), D^2(P)\), and \(D^3(P)\) are the change in position, velocity, and acceleration. \(w_1, w_2\), and \(w_3\) are weights chosen by us to control how much of each type of motion appears in the final piecewise function.&lt;/p&gt;

&lt;p&gt;To find these, we simply use the difference between subsequent data points. We can exploit the &lt;em&gt;sparcematrix&lt;/em&gt; datatype in Numpy to help do this pretty quickly. We use the &lt;em&gt;_.variable&lt;/em&gt; construct in our LP package &lt;em&gt;cvxpy&lt;/em&gt; to contruct our minimization variables and define our objective function.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;smooth_motion2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Form second difference matrix.
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;d1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spdiags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vstack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;d2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spdiags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vstack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;d3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spdiags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vstack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;fnc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We add some constraints to our minimiation problem to force the new path to stay inside the bounds of the old frame. We can only move the video so much in one direction before we find ourselves running out of frame. For this project, we’ve chosen to reduce the final image by 80% - giving us 20% of the frame size for wiggle room to do our stabilization. Once we’ve added the constraints, we can minimize our objective function.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Minimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fnc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Problem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;constraints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;solve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;verbose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;solver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ECOS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_iters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vals&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The smoothed motion output (in one direction only) looks something like this:&lt;/p&gt;
&lt;figure size=&quot;200px&quot; class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/smooth_x.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;applying-the-new-motion&quot;&gt;Applying the New Motion&lt;/h3&gt;
&lt;p&gt;Our our new, desired motion was found in the previous step. We now need to somehow &lt;em&gt;apply&lt;/em&gt; that motion to the original video frame. The red line is where we &lt;em&gt;want&lt;/em&gt; to be, the blue line is where we &lt;em&gt;are&lt;/em&gt;. How do we find a transformation from one line to the other?&lt;/p&gt;

&lt;p&gt;Matrix math comes to the rescue again! If &lt;em&gt;Ct&lt;/em&gt; is our original path (blue line) and &lt;em&gt;Pt&lt;/em&gt; is the desired path (red) - there is some transformation &lt;em&gt;Bt&lt;/em&gt; that converts between them such that &lt;em&gt;Pt = Ct * Pt&lt;/em&gt;. To solve for &lt;em&gt;Bt&lt;/em&gt;, we can simply take the inverse of Ct dotted with &lt;em&gt;Pt&lt;/em&gt;:&lt;/p&gt;

\[B_t = C_t \cdot P_t^{-1}\]

&lt;p&gt;This is why is useful to define a cummulative motion model instead of a frame to frame transform. If we are trying to get stabilize Frame 3, we need to know what happened in Frames 1 &lt;strong&gt;and&lt;/strong&gt; 2, not simply what happened between frames 2 and 3. Our accummulation of motion into &lt;em&gt;Ct&lt;/em&gt; has kept track of this motion for us. If you look at the smoothed x plot in the previous section, you can see that the y-axis runs to -700 pixels. This clearly isn’t possible in a single frame. Instead, what we’re looking at is the total motion in x from the first frame and on.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;apply_transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_frames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;bt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warp_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;box&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tmp_frame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw_box&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tmp_frame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crop_to_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;new_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp_frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_frames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;warp_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_points&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;cropping-the-frame-and-video-output&quot;&gt;Cropping the Frame and Video Output&lt;/h3&gt;
&lt;p&gt;The last steps are cropping the frame and outputting video. 
Cropping the frame is pretty straightfoward - we can simply take the center of the new image reduced by 80% (see the section &lt;strong&gt;Smooth Motion&lt;/strong&gt;). If we didn’t crop the edges, our result would look something like this:&lt;/p&gt;

&lt;figure size=&quot;200px&quot; class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/stabilization/uncropped.gif&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;Alternatively, we can keep the original frame and instead draw a box on the region that we &lt;strong&gt;would&lt;/strong&gt; keep. This isn’t helpful for stabilization but it is interesting to look at.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;crop_to_points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                       &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getPerspectiveTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dst_pts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_frame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warpPerspective&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_frame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_frame&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw_box&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;thickness&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;thickness&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Drawing the box looks like this:&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/m11D27G2hK4&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;conclusions&quot;&gt;Conclusions&lt;/h3&gt;
&lt;p&gt;This method as implemented has a lot of limitations:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Slow on large and high-resolution videos
    &lt;ul&gt;
      &lt;li&gt;The image can be loaded sequentially to avoid storing it memory&lt;/li&gt;
      &lt;li&gt;Parallelize the computation for longer videos&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Doesn’t stabilize based on the subject
    &lt;ul&gt;
      &lt;li&gt;If the subject strays to the outer 20% of the frame, they will get cropped out&lt;/li&gt;
      &lt;li&gt;Perform object/face recognition on the subject and add those points as constraints to the minimization problem&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Motion blur can be disorienting
    &lt;ul&gt;
      &lt;li&gt;When blur is in the direction of motion, we tend to ignore it. Stabilization can make motion blur occur in the wrong/unexpected direction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Projects" /><category term="OMSCS" /><category term="Computer Vision" /><summary type="html">OMSCS 6475 Computational Photography - Fall 2020</summary></entry><entry><title type="html">Wind River Range - 2020 (Part 1)</title><link href="http://localhost:4000/winds3/" rel="alternate" type="text/html" title="Wind River Range - 2020 (Part 1)" /><published>2020-11-01T00:00:00-07:00</published><updated>2020-11-01T00:00:00-07:00</updated><id>http://localhost:4000/wind3</id><content type="html" xml:base="http://localhost:4000/winds3/">&lt;p&gt;They said it couldn’t be done! In the summer of 2020, Ross and I went back to the Winds for a third helping of getting whipped by thin air and rugged terrain. This time we dialed back our backpacking goals and dialed up our climbing goals. Ross had recently left his position at Boston Scientific to move into the back of his truck. Some are calling it a “lateral move”, I’m not so sure. In all seriousness, I was extremely happy for him. I think taking a sabbatical to relax and experience nature is good for the soul. Also his departure lined up with my break between school semesters so we were able to get two full weeks to play around in Wyoming.&lt;/p&gt;

&lt;h3 id=&quot;preparation&quot;&gt;Preparation&lt;/h3&gt;
&lt;p&gt;We were aiming to spend about a week in Titcomb Basin, attempting the North Ridge of Mount Ellingwood and the summit of Gannett Peak. From there we’d hike out, drive around to a different trailhead, and hike into Deep Lake near the Cirque of the Towers. We had originally planned to go climb in the Cirque as well but crowds forced us to more remote areas.&lt;/p&gt;

&lt;figure class=&quot;align-right&quot; style=&quot;width: 150px&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ross_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;This is what 5 days of food and gear looks like when you're bad at packing.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;titcomb-basin&quot;&gt;Titcomb Basin&lt;/h3&gt;
&lt;p&gt;Attempting Mount Ellingwood and Gannett Peak over the course of five days meant that we needed a lot of extra gear. In addition to backpacking stuff and food for five days, we needed our full rock climbing kit AND our snow gear - crampons, boots, and axes.&lt;/p&gt;

&lt;h3 id=&quot;elk-heart-trailhead-to-titcomb-basin&quot;&gt;Elk Heart Trailhead to Titcomb Basin&lt;/h3&gt;
&lt;p&gt;We left from the Elk Heart Trailhead and made our way to Titcomb Basin. After rounding Island Lake, we started up Indian Pass, stopping at a small clearing to pitch our tent. The next morning we would tackle Mount Ellingwood and we wanted to avoid doubling back to the basin carrying our heavy packs.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/camp_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;Home is where you park it.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;A short hike away from our tent was a small tairn and a perfect view of our objective the next day - the North Ridge of Mount Ellingwood. Everything looks bigger from the ground and Ellingwood is no exception. We spent the fading evening light visualizing our ascent line and our tentative scramble descent. Our notes on the route warned us that the descent was killer - a few hours of walking through loose rocks to get back around to the base with some spicy scrambles and drop-offs along the way.&lt;/p&gt;

&lt;figure class=&quot;align-right&quot; style=&quot;width: 200px&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/fridge.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;mount-ellingwood&quot;&gt;Mount Ellingwood&lt;/h3&gt;
&lt;p&gt;We got an early start - storing our bear cans in the backcountry fridge and setting off with day packs.
When we hit what we thought was the base, we started up. A few hours in and we realized we most certainly were &lt;strong&gt;NOT&lt;/strong&gt; on the route. Maybe we should have realized when I broke off holds on the first pitch. Or maybe on the third pitch when I shimmied up a soaking wet offwidth that was at least two grades harder than the route we were supposed to be on. We definitely realized after lunch, when Ross scaled a vertical face and found himself suddenly on-route. A beautiful crack along a ridge with clean rock and epic views.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ellingwood_1.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;We topped out after many hours of climbing and way too many pitches.Now we just had to figure out the descent. It was loose and exposed - long drops on either side of poor footing. The worst part was that we had to keep our rock shoes on for most of the descent for fear our hiking boots wouldn’t grip well on the sloping rocks we were working our way down.&lt;/p&gt;
&lt;figure class=&quot;third&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ellingwood_2.jpg&quot; alt=&quot;So THIS is the route!? No wonder everyone loves it.&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ellingwood_3.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ellingwood_4.jpg&quot; alt=&quot;Only 3 more hours of this!&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;We got back to camp in the fading summer light - the sunset glowing on Elephant Head Rock as we picked our way across the streams back to our tent. We had planned to move camp that afternoon and set ourselves up for a shorter day to our next objective. But all that was on the docket that night was food and sleep.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/ellingwood_5.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;titcomb-basin-1&quot;&gt;Titcomb Basin&lt;/h3&gt;
&lt;p&gt;We loaded our packs back up - still remarkably heavy - and began the trek into Titcomb Basin. We were aiming for the furthest place we could reasonably pitch a tent as we were trying to get up and over the pass at the far end of the basin. We got in early and spent the rest of the afternoon relaxing and doing laundry and trying our best to avoid the wind that would come howling through the basin.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/titcomb_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;figcaption&gt;We were aiming for that thin sliver of snow on the right side of the mountain ridge on the furthest boundary of Titcomb Basin.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/titcomb_2.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/titcomb_3.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;We woke early - or rather we stayed up late - and got moving at 2am for an attempt at summitting Gannett Peak - the tallest mountain in Wyoming at 13,810ft. We’d have to cover over 6,000ft of vertical rise and fall - first crossing Dinwoody Pass then dropping down on to the glacier. It had been really warm recently and we knew the snow conditions would be suspect. To get over Dinwoody Pass and back safely, we wanted the snow to be as firm as possible - hence the early morning start. We crested Dinwoody Pass and saw the sun start to rise over Gannett Peak, our first glimpse of the mammoth rock hung with glaciers.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_1.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_2.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;We scrambled down the pass and onto the glacier. From here we worked our way across the snow and ice and back onto main summit route. As we climbed higher, so did the sun. By 8am, we had been moving for 6 hours non-stop and the heat was turning the snow to slush. We began sinking deeper and deeper in with every step. Ross was beginning to feel the effects of pushing this hard at high altitude and we made the decision to turn back before the snow conditions were dangerous on the return trip. We were about 1,500ft short of the summit so we would have a few more hours of climbing ahead of us.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_3.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_4.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;Luckily the snow help just fine on the way down the backside of Dinwoody and we made it back to our camp in the early afternoon - enough time to try and get in a nap before hiking out the next day.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_5.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/winds3/gannett_6.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Trip Reports" /><category term="Travel" /><category term="Photos" /><category term="Backpacking" /><summary type="html">Back for More. Again. Part 1.</summary></entry><entry><title type="html">Content Aware Image Resizing</title><link href="http://localhost:4000/seamcarving/" rel="alternate" type="text/html" title="Content Aware Image Resizing" /><published>2020-10-30T00:00:00-07:00</published><updated>2020-10-31T00:00:00-07:00</updated><id>http://localhost:4000/seamcarving</id><content type="html" xml:base="http://localhost:4000/seamcarving/">&lt;p&gt;The midterm for &lt;em&gt;CS 6475&lt;/em&gt; focused on replicating the results of &lt;a href=&quot;https://www.gwern.net/docs/technology/2007-avidan.pdf&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Seam Carving for Content-Aware Image Resizing (2007)&lt;/em&gt;&lt;/a&gt; 
and &lt;a href=&quot;https://faculty.idc.ac.il/arik/SCWeb/vidret/index.html&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Improved Seam Carving for Video Retargeting (2008)&lt;/em&gt;&lt;/a&gt;. The objective of content-aware image resizing is to change the size of an image in one dimension ONLY without scaling or cropping the image, which would change the image content dramatically​.&lt;/p&gt;

&lt;p&gt;On the left is an image that has been scaled by 150% and on the right is a content aware resizing of the same image. It’s easy to tell that the scaled image distorts our main subject – the dolphin.​&lt;/p&gt;

&lt;p&gt;​&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/seamcarving/dolphinscale.png&quot;&gt;&lt;img src=&quot;/assets/images/seamcarving/dolphinscale.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/seamcarving/dolphinresize.png&quot;&gt;&lt;img src=&quot;/assets/images/seamcarving/dolphinresize.png&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;&lt;/p&gt;

&lt;p&gt;To achieve this, we first calculate an image that identifies main features that we would like to retain. For this project, we are using the magnitude of the gradient – which contains edge information. The idea behind this is objects with strong edges are important and should be retained in the final image.​&lt;/p&gt;

&lt;p&gt;​
Once we have our edges, we identify low-energy connected paths through the image avoiding the edges and iteratively remove/add these paths depending on whether we are reducing or expanding our image. It is important that these paths are connect so that we retain image continuity between our initial and final image.​&lt;/p&gt;

&lt;h3 id=&quot;shrinking-an-image&quot;&gt;Shrinking an Image&lt;/h3&gt;
&lt;p&gt;To reduce an image by N columns, we repeat the following process N times:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Calculate the magnitude of gradients which contains our edge information and will be used as a proxy for pixel cost.​&lt;/li&gt;
  &lt;li&gt;Find the cheapest path through the image by dynamically following the cheapest cost.&lt;/li&gt;
  &lt;li&gt;When we find the cheapest connected path, we delete those pixels.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Here’s a video of this process in action:&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/seamcarving/dynamic-resizing.gif&quot;&gt;&lt;img src=&quot;/assets/images/seamcarving/dynamic-resizing.gif&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;The red line is the path the algorithm has chosen to remove.&lt;/p&gt;

&lt;p&gt;Breaking this down further, the magnitude of the gradient is found using the Sobel operator. In OpenCV, this is pretty easy but it does require a single channel image.&lt;/p&gt;

&lt;p&gt;The cost matrix is generated using two different methods. In the 2007 paper, the authors simply use the magnitude of the gradient as the cost. In the 2008 paper, the authors introduce the concept of &lt;em&gt;forward energy&lt;/em&gt; which looks at minimizing the resulting cost when a seam is removed. Forward energy can help fix some distortion and warping caused by doing a simple energy minimization (backward energy).&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculate_backward_energy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;energy_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;energy_img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;energy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculate_forward_energy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros_like&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros_like&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;cost_left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; \
                         &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;cost_up&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;cost_right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; \
                          &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

             &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost_left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                              &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost_up&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                              &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost_right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Cost&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using the cost matrix, the seam to be removed is the cheapest path through the matrix. To find this, we start in the bottom row with the minimum value and follow the path of least resistance back to the top row.&lt;/p&gt;

&lt;p&gt;Deleting a path is pretty easy, we can use numpy to create a mask of all the values we’d like to remove and simply reshape the matrix.&lt;/p&gt;

&lt;p&gt;Visualizing the removed paths on the original image is an interesting and non-trivial task. You can’t simply run the removal function multiple times and trace the path because you’ll just return the same path over and over. If you delete a path a re-run the removal on the smaller image, you’ll get a nicely resized output, but you won’t know
 where those removed paths came from in the original image. My solution for shrinking the image was to maintain a meshgrid map of the original pixels. The only think we’re really interested in is the x-coordinate of the pixel as we know that the y-coordinate will always increment going down the image. We first generate a meshgrid and delete the path from the meshgrid in addition to removing it from the image.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;x_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;meshgrid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;figure class=&quot;third&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/img.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/path.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/map.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;We then remove the path from both the original image AND from the x_map. A visualization or two will be helpful here.
We take our initial image and find the cost matrix and the path through that matrix. We then take our map of x coordinates and remove the path (highlighted in green) from both the original image and the map.&lt;/p&gt;

&lt;p&gt;The map now contains a…&lt;em&gt;map&lt;/em&gt; I suppose… of where the pixels were in the original image. In this case, we can see that the pixel that is currently in the first row, second column, came from the third column and so on. To keep track of our paths so that we can draw every removed path on the original image, we just need to add where the path is &lt;em&gt;in the map&lt;/em&gt;. Then we can draw on the image easily.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# This is done on every removal step
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# This is done once, at the end
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out_image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now we can finally recreate the pictures from the paper:&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/bench.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/bench_result.png&quot; alt=&quot;&quot; /&gt;
&lt;figcaption&gt;The original on the left, the result on the right.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;This image set reveals an important shortcoming of backward energy. The resulting image is not very realistic as the low energy paths have all gone through the left/right sides of the image and through the support pillar. Using forward energy, we can correct these issues:&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/bench_back.png&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/bench_forward.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;And get a nice, more realistic result:&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/bench_result_forward.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;expanding-an-image&quot;&gt;Expanding an Image&lt;/h3&gt;

&lt;p&gt;Expanding an image is, in principle, the same operation as reducing. We iterate through the original image, shrinking it by the same number of columns that wish to later expand the original by. As we remove columns, we keep track of what we’ve removed. Finally, we go back to the original image and add those seams &lt;em&gt;back&lt;/em&gt;. We can make the results more realistic by adding a new seam that is the average of the pixels around it, instead of a direct copy. This creates a more uniform blending of the final image.&lt;/p&gt;

&lt;p&gt;The tricky part here is keeping track of where the seams should go in the expanded image. It’s very easy to distort the image by messing up your x-coordinates here. We can update each seam as we add it, shifting it according to the seams we already have in our library:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;all_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;current_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_x&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;current_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Visualizing this process looks like this:&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/seamcarving/dynamic-expanding.gif&quot;&gt;&lt;img src=&quot;/assets/images/seamcarving/dynamic-expanding.gif&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;As you can see, the individual paths are not continuous in the newly expanded image, but they &lt;em&gt;are&lt;/em&gt; continuous in the final image. We can see all added paths in a 150% expansion:&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/dolphin_result.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;figure class=&quot;align-right&quot;&gt;
    &lt;img src=&quot;http://localhost:4000//assets/images/seamcarving/funny.png&quot; alt=&quot;&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;And there you have it! You can have quite a bit of fun with this algorithm. Applying it to something more complicated, like a face, produces a caricature effect where the algorithm removes the unimportant spaces (like your forehead) and leaves you with a carnival-esque drawing. You can also run the removal operation followed by the expand operation. This will tend to amplify &lt;em&gt;important&lt;/em&gt; features but in a face will leave you looking like a distant, chubby relative.&lt;/p&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Projects" /><category term="OMSCS" /><category term="Computer Vision" /><summary type="html">OMSCS 6475 Computational Photography - Fall 2020</summary></entry><entry><title type="html">Trading with Machine Learning</title><link href="http://localhost:4000/autotrader/" rel="alternate" type="text/html" title="Trading with Machine Learning" /><published>2020-07-24T00:00:00-07:00</published><updated>2020-07-14T00:00:00-07:00</updated><id>http://localhost:4000/autotrader</id><content type="html" xml:base="http://localhost:4000/autotrader/">&lt;p&gt;I took Machine Learning for Trading Summer 2020. The final project consisted of a manual strategy based on hard-coded indicator threshold values and a Strategy Learner bot that used random forests to generate trading decisions based on calculed indicators. In &lt;a href=&quot;/indicators/&quot; target=&quot;_blank&quot;&gt;Part I&lt;/a&gt;, the indicator calculations are discussed in detail. Here, we’ll talk through three strategies - the theoretically optimal strategy, a manual strategy and machine learning strategy.&lt;/p&gt;

&lt;h3 id=&quot;indicators-for-trading&quot;&gt;Indicators for Trading&lt;/h3&gt;

&lt;p&gt;The basis for both the Manual Strategy and the Machine Learning strategy were stock indicators. In this project, we’ll only be using three of the five indicators calculated in &lt;a href=&quot;/indicators/&quot; target=&quot;_blank&quot;&gt;Part I&lt;/a&gt;. The reason for this will be discussed in more detail below.&lt;/p&gt;

&lt;p&gt;All of the indicators have both a continuous value and what I’m calling a &lt;em&gt;signalized&lt;/em&gt; value where I set thresholds to return either a +1 (BUY), -1 (SELL), or 0 (HOLD). Because of various project constraints set by the teaching staff, this signalized column is calculated outside of the indicator code.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;signalized&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_thresh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_thresh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Replace a column name with the signal version
    Replaces everything above upper_thresh with +1 and everything below with -1.
    Os for everything else.
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_thresh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_thresh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;some-project-constraints&quot;&gt;Some Project Constraints&lt;/h4&gt;
&lt;p&gt;Before we get into the details of the strategies, I’ll cover some project constraints from the teaching staff.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;We’re only trading one stock symbol (no portfolio optimization)&lt;/li&gt;
  &lt;li&gt;No limits on leverage&lt;/li&gt;
  &lt;li&gt;Only allowable positions are +1000/-1000/0 shares&lt;/li&gt;
  &lt;li&gt;Max allowable trades are +2000/-2000 to maintain the above position&lt;/li&gt;
  &lt;li&gt;The input is a price dataframe indexed by date listing adjusted prices for a stock.&lt;/li&gt;
  &lt;li&gt;The output is a pandas dataframe indexed by date listing trade values.&lt;/li&gt;
  &lt;li&gt;Both manual and machine learning strategies must use the same indicators.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;manual-strategy&quot;&gt;Manual Strategy&lt;/h4&gt;
&lt;p&gt;The Manual Strategy is a trading strategy that uses the &lt;em&gt;signalized&lt;/em&gt; version of three indicators - Bollinger Bands, Stochastic Oscillator, and MACD.&lt;/p&gt;

&lt;p&gt;A date range and symbol are passed into the ManualStrategy constructor. 
The three indicators are added to the dataframe and signalized to be either +1, -1, or 0.&lt;/p&gt;

&lt;p&gt;To determine whether we should trade based on these three signal values, I used a weighted sum approach.&lt;/p&gt;

&lt;p&gt;The weights were found by running a basinhopping algorithm and optimizing the weights for each signal to maximize returns. This is why I restricted my decision making to only three signals. While using all five indicators, I found that RSI and OBV were returning weights near 0. Clearly these indicators were not contributing to the output so I eliminated them entirely.&lt;/p&gt;

&lt;p&gt;This algorithm takes a while and the project has defined symbols and date ranges. For this reason, the allocations that are returned from basinhopping were hardcoded for the project. If this strategy were being applied in a real application, I would run the allocation optimization to train the algorithm once, then use those allocations for the testing phase.&lt;/p&gt;

&lt;p&gt;Once we have the optimal weights and have generated a signal column, we can use the prices dataframe to output a trading dataframe.&lt;/p&gt;

&lt;p&gt;This trader actually performs pretty well, both with in-sample data and with out-of-sample data.&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/autotrader/manual_in.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/manual_in.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/autotrader/manual_out.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/manual_out.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Manual strategy performance showing the long/short sales.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;theoretically-optimal-strategy&quot;&gt;Theoretically Optimal Strategy&lt;/h4&gt;
&lt;p&gt;The TOS is an important aspect that we must figure out &lt;em&gt;before&lt;/em&gt; we use our strategy learner. This is because we need to use the TOS to classify our daily prices/indicators as either a buy/sell or hold and we will use the classifications generated by the TOS to do this.&lt;/p&gt;

&lt;p&gt;When we train the decision tree, we use a date range in the past so that we can see the future. When you can see the future, generating the optimal strategy is as simple as buying before the price rise and shorting/selling before the price drops. Because we can sell AND short the stock, our optimal strategy is simple:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;When the future price will rise, buy the maximum number of shares.&lt;/li&gt;
  &lt;li&gt;When the future price will fall, sell all the available shares and short the maximum number of
shares&lt;/li&gt;
  &lt;li&gt;Hold each stock for as long as the current trend continues (hold a short when the price is going
down on successive trading days, hold a long position when the price goes up on successive
trading days)&lt;/li&gt;
  &lt;li&gt;If the price does nothing between days, hold the current position.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To calculate this strategy in terms of a trading dataframe, first we gather the price data and generate a
dataframe that calculates the difference between prices on successive days. Whenever the change is negative, we replace it with -1,when it’s positive, we replace it with +1. To capture the buy opportunities, we need to capture the positive changes and the sell/short opportunities which are the negative changes (stock price is decreasing). We only need to trade on the days where there is an inflection in the change (from positive to negative or vice versa).&lt;/p&gt;

&lt;p&gt;If we plot the performance on the TOS vs a benchmark of buying and holding, we can see that you can generate massive returns if you can see the future!&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/autotrader/tos.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/tos.png&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;strategy-learner&quot;&gt;Strategy Learner&lt;/h4&gt;
&lt;p&gt;The strategy learner uses a bagged learner with 50 bags composed of decision trees with a leaf size of 5.&lt;/p&gt;

&lt;p&gt;Each feature row is a vector of indicators described above. The labels for each row were generated from the TheoreticallyOptimalStrategy learner discussed above. The training data was analyzed using this optimal strategy which, with perfect knowledge of the future, will determine what day the learner should trade and in which direction. The goal is to allow the learner to associated certain indicator values with buy/sell signals. The buy/sell signal threshold was optimized for both the in-sample and out-of-sample cumulative returns. CR values above YBUY
classify the day as a +1 BUY signal, values below YSELL classify the day as -1 SELL.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/autotrader/experiment1.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/experiment1.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Decision Tree learner and Manual Strategy performnace on in-sample data.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Not suprisingly, the machine learning algorithm learns the proper buy/sell signal for in-sample data and generates shockingly good returns. Also not suprisingly, the learner performs poorly on out-of-sample data. It’s not really clear why, but the class does not require analysis of of out-of-sample results, probably because they’re almost universally bad. This makes sense - otherwise any masters student could game the market and generate huge returns.&lt;/p&gt;

&lt;h4 id=&quot;the-impact-of-impact&quot;&gt;The Impact of &lt;em&gt;Impact&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;An interesting adjustment to the TOS is to consider adding trading impact to the strategy. This means that on every trade, you lose a little bit to market mechanics. The idea is to simulate the market moving &lt;em&gt;while&lt;/em&gt; you’re trading. Typical values for impact might be 0.005.&lt;/p&gt;

&lt;p&gt;The TOS was updated to account for impact by making a trading decision of a BUY/SELL &lt;em&gt;only&lt;/em&gt; if the gain from the trade would offset the loss due to impact. The hypothesis is that a machine learning trading algorithm that considers impact will only trade on days when it believes the trade gain will offset the impact loss, thus reducing the total number of trades made over a time period.&lt;/p&gt;

&lt;p&gt;Comparing three different strategies, we can see how a learner that considers impact trades differently and how that affects the total returns. three strategy Learner 1 has no impact and is trained with the old TOS. Learner 2 has an impact value of 0.010 and is trained with the old TOS. Learner 3 has an impact of 0.010 and is trained with the new TOS that considers impact.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/autotrader/experiment2_1.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/experiment2_1.png&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Varying the impact through a set range, we can see when the new strategy eclipse the old in terms of returns. We can also see how the number of trades decreases as the impact amount increases:&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/autotrader/experiment2_2.png&quot;&gt;&lt;img src=&quot;/assets/images/autotrader/experiment2_2.png&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;project-reports&quot;&gt;Project Reports&lt;/h3&gt;
&lt;p&gt;See the links below for my final report.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/downloads/autotrader/report.pdf&quot; target=&quot;_blank&quot;&gt;Report&lt;/a&gt;&lt;/p&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Projects" /><category term="OMSCS" /><category term="AI" /><summary type="html">OMSCS 7647 Machine Learning for Trading - Summer 2020</summary></entry><entry><title type="html">Stock Indicators for Trading</title><link href="http://localhost:4000/indicators/" rel="alternate" type="text/html" title="Stock Indicators for Trading" /><published>2020-07-24T00:00:00-07:00</published><updated>2020-07-14T00:00:00-07:00</updated><id>http://localhost:4000/indicators</id><content type="html" xml:base="http://localhost:4000/indicators/">&lt;p&gt;I took Machine Learning for Trading Summer 2020. Although I found it covered a lot of the same ground as &lt;em&gt;CS 6601 - Artificial Intelligence&lt;/em&gt; but in less depth and detail, I appreciated learning about stock indicators and trading strategies as well as getting more familiar with database operations using pandas.&lt;/p&gt;

&lt;p&gt;In addition to &lt;em&gt;a lot&lt;/em&gt; of introductory numpy and pandas coursework, the class introduced basic stock trading terminology and techniques. The &lt;em&gt;machine learning&lt;/em&gt; aspect was restricted to implementing a simple Q-Learning bot and a few version of decision trees. Our final project consisted of a manual strategy based on hard-coded indicator threshold values and a Strategy Learner bot that used random forests to generate trading decisions based on calculed indicators.&lt;/p&gt;

&lt;p&gt;For this post, I’ll cover the stock indicators, in &lt;a href=&quot;/autotrader/&quot; target=&quot;_blank&quot;&gt;Part II&lt;/a&gt; we’ll use the indicators in a both a manual and machine learning-based trading strategy.&lt;/p&gt;

&lt;h3 id=&quot;indicators-for-trading&quot;&gt;Indicators for Trading&lt;/h3&gt;

&lt;p&gt;The basis for both the Manual Strategy and the Machine Learning strategy were stock indicators. All students calculated five indicators and used them to make trading decisions. The five indicators I chose were Bollinger Bands, Relative Strength Index, On-Balance Volume, Stochastic Oscillator, and Moving Average Convergence-Divergence. These were chosen for ease of calculation and because there are well-established trading strategies for all of these.&lt;/p&gt;

&lt;h4 id=&quot;bollinger-bands&quot;&gt;Bollinger Bands&lt;/h4&gt;
&lt;p&gt;Bollinger Bands are upper and lower limit lines to a price chart that help anticipate future price movements. The idea is to add upper and lower bounds that are 2 standard deviations above/below the simple moving average of a stock based on a 20 day window. Bollinger Bands can be calculated as shown below.&lt;/p&gt;

\[Upper Band = MA(Price, n) + 2 * \sigma (Price, n)\]

\[Lower Band = MA(Price, n) - 2 * \sigma (Price, n)\]

&lt;p&gt;The bands can be used to generate a buy/sell signal whenever the price line crosses one of the bands. When the price crosses the upper band in a downward direction, that’s a sell signal. When the price crosses the lower band in an upward direction, that’s a buy signal. The idea is that the price will revert to the mean and by crossing the 2-sigma deviation line, it is not accurately reflecting the value of the stock. Below, we can see the buy/sell signal by calculating the Bollinger Band Percent.&lt;/p&gt;

\[\%B = \frac{Price - Lower Band}{Upper Band - Lower Band}\]

&lt;p&gt;Where MA is the moving average, Price is the dataframe with daily adjusted price, n is the window size, and \(\sigma\) is the standard deviation of the prices. This can be calculated in python using pandas as follows:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bollinger_bands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Source: https://www.investopedia.com/terms/b/bollingerbands.asp
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;upper_band&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lower_band&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bbp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_band&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper_band&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_band&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_band&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_band&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bb&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the manual strategy, the &lt;em&gt;bbp&lt;/em&gt; column was further processed - values above 1.0 were treated as a sell signal (-1) and values below 0 were treated as a buy signal (+1).&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'BB-Signal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'BB-Signal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'BB-Signal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bollinger Bands are plotted below.&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/indicators/bollinger_bands.png&quot;&gt;&lt;img src=&quot;/assets/images/indicators/bollinger_bands.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/indicators/bollinger_bands2.png&quot;&gt;&lt;img src=&quot;/assets/images/indicators/bollinger_bands2.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Bollinger Bands shown for JPM with both bands and normalized signals shown.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;relative-strength-index&quot;&gt;Relative Strength Index&lt;/h4&gt;
&lt;p&gt;RSI is a momentum indicator that varies between 0 and 100 that helps analysts identify overbought and
oversold trends. RSI is calculated as shown below.&lt;/p&gt;

\[RSI = 100 - \frac{100}{1 + \frac{Average Gain}{Average Loss}}\]

&lt;p&gt;The average gain and loss are found using a rolling window of 14 days and looking at the days when
the stock lost value (average losses) or gained value (average gains).&lt;/p&gt;

&lt;p&gt;RSI can be used to generate buy/sell signals using conventional thresholds of 70 signaling overbought
(thus a sell signal) and 30 signaling oversold (a buy signal). RSI can also be used to confirm a general
trend in a stock’s movement.&lt;/p&gt;

&lt;p&gt;In python:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rsi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Source: https://school.stockcharts.com/doku.php?id=technical_indicators:relative_strength_index_rsi
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;difference&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;down_prices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;difference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;up_prices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;difference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;down_prices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;down_prices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;up_prices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;up_prices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;gain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;up_prices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;down_prices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;RSI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;rsi_signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RSI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rsi_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rsi_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RSI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rsi_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RSI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RSI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rsi_signal&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;on-balance-volume&quot;&gt;On-Balance Volume&lt;/h4&gt;

&lt;p&gt;On-Balance Volume (OBV) is another indicator to assess the momentum of a stock using the volume of
the stock. The idea is that volume indicates the sentiment of the market - when there is strong upward
price movement there is also increased trading volume, resulting in a higher OBV. You can use the
slope of the OBV as a leading indicator of future price movements. It also indicates a positive market
trend because on days with a lot of price movement, there is a lot of volume movement.&lt;/p&gt;

&lt;p&gt;Because OBV is a leading indicator, it can be used to predict price moves by its positive/negative
slope. When the slope is positive, that’s a buy signal. When the slope is negative, that is a sell signal.
OBV is not commonly used as a pricing indicator alone but is used to verify signals from other
indicators. In addition, a divergence between price movement and OBV movement can trigger a
buy/sell signal. Theoretically, OBV reacts before price (as a leading indicator). Therefore, if the OBV
slope is negative while the price slope is positive, that is a divergence and indicates a sell signal.
Similarly, if the OBV slope is positive while the price slope is negative, that’s a divergence in the other
direction and indicates a buy signal.&lt;/p&gt;

&lt;p&gt;On-balance volume is calculated as follows:&lt;/p&gt;

\[OBV = OBV_{prev} + \left\{ \begin{matrix}
            volume  &amp;amp; \mathrm{if}\ close &amp;gt; close_{prev} \\
            0       &amp;amp; \mathrm{if}\ close = close_{prev} \\
            -volume &amp;amp; \mathrm{if}\ close &amp;lt; close_{prev}
            \end{matrix} \right.\]

&lt;p&gt;In python:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;on_balance_volume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;volume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Source: https://www.investopedia.com/terms/o/onbalancevolume.asp
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;up&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;down&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;zero&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nan&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;volume&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;volume&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumsum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;price_signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;obv_signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;standardize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumsum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obv_signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;price_signal&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;OBV is plotted below.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/indicators/on_balance_volume.png&quot;&gt;&lt;img src=&quot;/assets/images/indicators/on_balance_volume.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;OBV shown for JPM with normalized signals shown.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;stochastic-oscillator&quot;&gt;Stochastic Oscillator&lt;/h4&gt;
&lt;p&gt;The stochastic oscillator indicator assesses momentum and compares the closing price of a stock on
any given day with the maximum and minimum closing prices of the same stock over a range. This
indicator can be used to indicate whether a stock is overbought or oversold, helping to trigger a buy/sell
signal.&lt;/p&gt;

&lt;p&gt;Using the oscillator, a buy/sell signal can be generated when the stochastic oscillator line crosses a
moving average line, indicating a reversal in price could be on its way. High values of the SO indicate
that the stock is overbought and low values indicate the stock is oversold. Common threshold values
for these conditions are 80 for overbought (indicating a good time to sell) and 20 for oversold
(indicating a good time to buy).&lt;/p&gt;

&lt;p&gt;The stochastic oscillator is calculated as shown below:&lt;/p&gt;

\[SO = \frac{100 * Price(t) - min(Price, n)}{max(Price, n) - min(Price, n)}\]

&lt;p&gt;In python:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stochastic_oscillator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Souce: https://www.investopedia.com/terms/s/stochasticoscillator.asp
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n_fast&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# max_fast = high_df.rolling(window=n_fast).max()
&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# min_fast = low_df.rolling(window=n_fast).min()
&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;so&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;so_average&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;so&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rolling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n_fast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;so&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;so_average&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Stochastic Oscillator is plotted below with buy/sell signals.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/indicators/stochastic_oscillator.png&quot;&gt;&lt;img src=&quot;/assets/images/indicators/stochastic_oscillator.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;SO shown for JPM with a normalized signal shown along with the buy/sell signal lines.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;moving-average-convergence-divergence&quot;&gt;Moving Average Convergence-Divergence&lt;/h4&gt;
&lt;p&gt;The Moving Average Convergence-Divergence indicators (MACD) is a momentum indicator to assess
the relationship between two different moving averages. MACD is calculated using three different
moving averages – the 12 day exponential moving average (EMA), 26 day EMA, and the 9 day EMA.
Because the 12 day EMA responds more quickly to price changes than the 26 day EMA, the MACD
indicates changes in trends.&lt;/p&gt;

\[MACD = EMA(Price, n_{fast}) - EMA(Price, n_{slow})\]

\[MACD_{signal} = EMA(Price, n_{signal})\]

&lt;p&gt;The buy/sell signal can be found when the MACD crosses the signal line. If the MACD falls below the
signal line, it may indicate a sell signal as the market is possibly entering a downturn. If the MACD
rises above the signal line, it can be a buy signal indicating a bull market. The histogram plots the
difference between the MACD and Signal lines. When the histogram crosses from positive to negative,
that is a sell signal and when it crosses from negative to positive, that is a buy signal.&lt;/p&gt;

&lt;p&gt;In python!&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;macd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Source: https://www.investopedia.com/terms/m/macd.asp
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signal_period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;slow_period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fast_period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ewa_slow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ewm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slow_period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ewa_fast&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prices_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ewm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fast_period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MACD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ewa_fast&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ewa_slow&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;macd_signal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MACD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ewm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal_period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;macd_diff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MACD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;macd_signal&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MACD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;macd_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;macd_diff&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;MACD is plotted below with buy/sell signal lines.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/indicators/macd.png&quot;&gt;&lt;img src=&quot;/assets/images/indicators/macd.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;MACD shown for JPM with buy/sell signal lines and a positive/negative histogram indicator.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;In &lt;a href=&quot;/autotrader/&quot; target=&quot;_blank&quot;&gt;Part II&lt;/a&gt; we’ll use some of these indicators to generate trading signals for both a manual and strategy using decision trees.&lt;/p&gt;

&lt;h3 id=&quot;project-report&quot;&gt;Project Report&lt;/h3&gt;
&lt;p&gt;See the link below for my class indicator report.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/downloads/indicators/report.pdf&quot; target=&quot;_blank&quot;&gt;Report&lt;/a&gt;&lt;/p&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Projects" /><category term="OMSCS" /><category term="AI" /><summary type="html">OMSCS 7647 Machine Learning for Trading - Summer 2020</summary></entry><entry><title type="html">Summer in Seattle - 2019</title><link href="http://localhost:4000/washington/" rel="alternate" type="text/html" title="Summer in Seattle - 2019" /><published>2020-07-08T00:00:00-07:00</published><updated>2020-10-31T00:00:00-07:00</updated><id>http://localhost:4000/washington</id><content type="html" xml:base="http://localhost:4000/washington/">&lt;p&gt;Our travel nursing adventure continues. From Bemidji, Minnesota we accepted a position in Bellevue, Washington outside of Seattle. We loaded up the car and drove to Seattle in April. I had worked in Mount Rainier National Park in college and had some familiarity with the area, but had only spent a few days in Seattle and had only the smallest idea of what life in the Northwest would be. Turns out, it’s just as rainy as everyone says.&lt;/p&gt;

&lt;p&gt;While in Seattle, I accepted a contract engineering position at the Boeing factory in Everett, Washington. That job cut significantly into my outdoor time but was a valuable professional experience. Enough about work, this post is about some of our selected adventures over the summer.&lt;/p&gt;

&lt;h3 id=&quot;olympic-national-park&quot;&gt;Olympic National Park&lt;/h3&gt;
&lt;h4 id=&quot;march-29-2019---april-1-2019&quot;&gt;March 29, 2019 - April 1, 2019&lt;/h4&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/olympic1.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/olympic1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/olympic2.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/olympic2.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Started our trip from Rialto Beach. The weather was pretty gray but not rainy. As we started out, we saw some real psychos surfing in the huge breaks off the beach. Surfing through the crashing surf, sunken logs, and rocky outcroppings…I guess that’s surfing in the Northwest?&lt;/p&gt;

&lt;p&gt;The hiking was tough - everything from soft sand to pebbles to stacks of logs slick with moss and ocean water. We hiked north to Chilean Memorial just after lunch and found a nice flat tent spot above high tide. . We had a really relaxing afternoon of wandering the beach and checking out all the great tidal pools.&lt;/p&gt;

&lt;p&gt;As the night approached, a few other groups showed up and camped nearby. I thought it was pretty funny because this group was so hesitant to ask us anything - even though I offered the site for sharing. It was like movie theater spacing but with campsites! We even had to twist arms to get them to share our fire instead of starting a new one. Oh, also they tried to filter seawater to make dinner! Not try, they did and must have had the saltiest freeze dried food ever. We then watched them make tea with sea water…After a few hours they asked us about freshwater sources and we were like, yeah there’s a creek about 50 feet away. I guess I should have said something earlier but I didn’t want to be a total know-it-all, maybe they had some saltwater filter? No. No they didn’t. I still think about this over a year later - how disguesting was that tea?&lt;/p&gt;

&lt;p&gt;In the morning, we hiked out and got trapped about a mile down the trail because the tide was in. We ended up sitting on some rocks talking to a coffee salesman for a few hours while we waited for the beach to be passable.&lt;/p&gt;

&lt;p&gt;Overall, wonderful, relaxing backpacking trip. We had no issues with rain, it wasn’t super strenuous, just a long, relaxing walk on the beach!&lt;/p&gt;

&lt;h3 id=&quot;gothic-basin-and-del-campo-peak&quot;&gt;Gothic Basin and Del Campo Peak&lt;/h3&gt;
&lt;h4 id=&quot;june-15-2019&quot;&gt;June 15, 2019&lt;/h4&gt;

&lt;p&gt;Day hiked to Gothic Basin and up Del Campo Peak with Matt Mayo. This was a tough hike in and the basin and peak were snow covered. I was thankful for the full sun protection I was wearing. Saw a lot of day hikers doing this in tennis shoes, shorts, and tank tops. Sunburn city.&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/gothic1.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/gothic1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/gothic2.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/gothic2.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;The scramble off the snow to the peak was awesome - classic Washington class 3 scramble with really solid rocks and astounding views.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/gothic3.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/gothic3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/gothic4.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/gothic4.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;enchantments-thru-hike-plus-little-annapurna&quot;&gt;Enchantments Thru Hike (Plus Little Annapurna)&lt;/h3&gt;
&lt;h4 id=&quot;july-6-2019&quot;&gt;July 6, 2019&lt;/h4&gt;

&lt;p&gt;My friend, old roommate, and rowing team mate Ross Wise dropped in for a long weekend. While he was here, I figured I should finally try the 19 mile thru hike of the Enchantments.&lt;/p&gt;

&lt;p&gt;The Enchantments are a Washington staple. Permits are required to camp in the interior so the “easiest” option is to just hike through the core in one shot as a long day hike. By long, I mean 19 miles point to point and 6000 feet of elevation gain. Luckily, Ross is always up for a sufferfest and Mary was willing to shuttle us between trailheads.&lt;/p&gt;

&lt;p&gt;We started early to beat crowds and because we anticpated taking 12 hours to finish after tacking on an additional sidetrip to the top of Little Annapurna, a small scramble off the main trail.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/enchantments1.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/enchantments1.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;The first four miles of the trail were a slow inclined approach to Colchuck Lake, a beautiful lake at the foot of Aasgard Pass and Dragontail Peak. We made really good time through this first section then picked around the lake, through a boulder field and up the notorious Aasgard Pass - 1500 feet of gain in about half a mile. It’s a staircase of loose dirt and pebbles and if you get there too late in the day, it’s sunny the entire way up. We pushed to the top and enjoyed 6 amazing miles of flat hiking though the high elevation alpine lakes - still mostly frozen over. The trail was half snow, but it was a well traveled path through the maze of lakes.&lt;/p&gt;

&lt;p&gt;Once you get through the lakes, the last 6-8 miles was a descent back through the woods, mostly uneventful and our feet were growing increasingly sore. We finally stumbled out just under 11 hours after starting.&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/enchantments2.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/enchantments2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/enchantments3.jpg&quot;&gt;
&lt;img src=&quot;/assets/images/washington/enchantments3.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;
&lt;h3 id=&quot;perry-creek-and-mt-forgotten-meadows&quot;&gt;Perry Creek and Mt Forgotten Meadows&lt;/h3&gt;
&lt;h4 id=&quot;july-19-2019&quot;&gt;July 19, 2019&lt;/h4&gt;

&lt;p&gt;I was feeling a bit cooped up at Boeing, so I left after work for a short overnight backpacking/photography trip to Mount Forgotten Meadows.&lt;/p&gt;

&lt;p&gt;This trip typified what I love so much about getting outside in Washington. The hike was hard but the trail was well maintained. There was nobody else on the trail and I got to camp in a meadow with perfect views of Glacier Peak without any permits or reservations. All you have to deal with is the ever present thread of a storm!.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/forgotten4.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/forgotten4.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/forgotten2.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/forgotten2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/forgotten3.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/forgotten3.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;snowking-mountain&quot;&gt;Snowking Mountain&lt;/h3&gt;
&lt;h4 id=&quot;august-31---september-2-2019&quot;&gt;August 31 - September 2, 2019&lt;/h4&gt;
&lt;p&gt;Mary and I met up with some Arthur and Kristi to do an out and back trip to Cyclone Lake and Snowking Mountain over Labor Day weekend.&lt;/p&gt;

&lt;p&gt;The hike in was HARD, one of the steepest approaches I’ve ever seen with about 3500ft of elevation gained in 1.75 miles. I’ve done a lot of steep approaches over the years but the miles going up and down are on old climber trails through thick trees. It feels like climbing a staircase for miles, except on loose dirt. The cluster of lakes around the base of Snowking are unbelievable and the view from the summit might make the grind up worth it.&lt;/p&gt;

&lt;figure class=&quot;align-center&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/snowking2.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/snowking2.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;The route up Snowking is tons of fun with insane views and easy, solid scrambling. The view from the top was incredible and almost made us forget about the downhill trudge we had coming up. We even got in some good glissade tracks on the way down.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/assets/images/washington/snowking3.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/snowking3.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/assets/images/washington/snowking4.jpg&quot;&gt;&lt;img src=&quot;/assets/images/washington/snowking4.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Trip Reports" /><category term="Travel" /><category term="Photos" /><category term="Backpacking" /><summary type="html">Adventures in the Northwest</summary></entry><entry><title type="html">OMSCS Program Overview</title><link href="http://localhost:4000/omscs/" rel="alternate" type="text/html" title="OMSCS Program Overview" /><published>2020-04-28T00:00:00-07:00</published><updated>2020-10-31T00:00:00-07:00</updated><id>http://localhost:4000/omscs</id><content type="html" xml:base="http://localhost:4000/omscs/">&lt;p&gt;Collection of projects and courses that I’ve taken through Georgia Tech’s online Computer Science Master’s program.&lt;/p&gt;

&lt;h2 id=&quot;spring-2020&quot;&gt;Spring 2020&lt;/h2&gt;
&lt;h3 id=&quot;cs-6476---computer-vision&quot;&gt;&lt;a href=&quot;https://www.omscs.gatech.edu/cs-6476-computer-vision&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6476 - Computer Vision&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/ar/&quot; target=&quot;_blank&quot;&gt;OpenCV and Augmented Reality&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/tracking/&quot; target=&quot;_blank&quot;&gt;Particle Filters and Mitt Romney&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/mhi/&quot; target=&quot;_blank&quot;&gt;Motion History Images for Activity Recognition&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cs-8803---ai-for-robotics-now-cs-7638&quot;&gt;&lt;a href=&quot;https://www.omscs.gatech.edu/cs-7638-artificial-intelligence-robotics&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 8803 - AI for Robotics (now CS 7638)&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/kalman/&quot; target=&quot;_blank&quot;&gt;Kalman Filters for Tracking&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;fall-2020&quot;&gt;Fall 2020&lt;/h2&gt;
&lt;h3 id=&quot;cs-7637---knowledge-based-ai&quot;&gt;&lt;a href=&quot;https://www.omscs.gatech.edu/cs-7637-knowledge-based-artificial-intelligence-cognitive-systems&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 7637 - Knowledge-Based AI&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/kbai/&quot; target=&quot;_blank&quot;&gt;An AI Agent for Solving Raven’s Progressive Matrices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;spring-2020-1&quot;&gt;Spring 2020&lt;/h2&gt;
&lt;h3 id=&quot;cs-6300---software-development-process&quot;&gt;&lt;a href=&quot;http://www.omscs.gatech.edu/cs-6300-software-development-process&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6300 - Software Development Process&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/boggle/&quot; target=&quot;_blank&quot;&gt;Building an Android App&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cs-6601---artificial-intelligence&quot;&gt;&lt;a href=&quot;https://www.omscs.gatech.edu/cs-7637-knowledge-based-artificial-intelligence-cognitive-systems&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6601 - Artificial Intelligence&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Classification with Decision Trees&lt;/li&gt;
  &lt;li&gt;Game Playing with Minimax&lt;/li&gt;
  &lt;li&gt;Searching with A*&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;summer-2020&quot;&gt;Summer 2020&lt;/h2&gt;
&lt;h3 id=&quot;cs-7646---machine-learning-for-trading&quot;&gt;&lt;a href=&quot;https://www.omscs.gatech.edu/cs-7646-machine-learning-trading&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 7646 - Machine Learning for Trading&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/indicators/&quot; target=&quot;_blank&quot;&gt;Stock Indicators for Trading&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/autotrader/&quot; target=&quot;_blank&quot;&gt;Trading with Machine Learning&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;fall-2020-1&quot;&gt;Fall 2020&lt;/h2&gt;
&lt;h3 id=&quot;cs-6475---computational-photography&quot;&gt;&lt;a href=&quot;http://omscs.gatech.edu/cs-6475-computational-photography/&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6475 - Computational Photography&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/seamcarving/&quot; target=&quot;_blank&quot;&gt;Content Aware Image Resizing&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Generating Panoramas&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/stabilization/&quot; target=&quot;_blank&quot;&gt;Auto-Directed Video Stabilization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cs-7639---cyber-physical-design-and-analysis&quot;&gt;&lt;a href=&quot;https://omscs.gatech.edu/cs-7639-cyber-physical-design-and-analysis&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 7639 - Cyber-Physical Design and Analysis&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Trajectory Planning with Constraints&lt;/li&gt;
  &lt;li&gt;Component Selection and Optimization with Python&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;spring-2021&quot;&gt;Spring 2021&lt;/h2&gt;
&lt;h3 id=&quot;cs-6750---human-computer-interaction&quot;&gt;&lt;a href=&quot;https://omscs.gatech.edu/cs-6750-human-computer-interaction&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6750 - Human-Computer Interaction&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Maps.me Application Interface Redesign&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cs-6515---intro-to-graduate-algorithms&quot;&gt;&lt;a href=&quot;http://omscs.gatech.edu/cs-8803-ga-graduate-algorithms&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;CS 6515 - Intro to Graduate Algorithms&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Projects&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Algorithm Design and Analysis covering:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Dynamic Programming&lt;/li&gt;
  &lt;li&gt;Divide and Conquer Approaches&lt;/li&gt;
  &lt;li&gt;Graph Techniques&lt;/li&gt;
  &lt;li&gt;NP Reductions&lt;/li&gt;
  &lt;li&gt;RSA Cryptography and Modular Math&lt;/li&gt;
  &lt;li&gt;Linear Programming&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Marc Micatka</name><email>marc.micatka@gmail.com</email></author><category term="Projects" /><category term="OMSCS" /><summary type="html">Marc's path to a CS Master's</summary></entry></feed>